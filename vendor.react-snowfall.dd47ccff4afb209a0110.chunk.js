"use strict";(self.webpackChunkpersonal_website=self.webpackChunkpersonal_website||[]).push([[877],{5418:(e,t,s)=>{s.d(t,{A:()=>k});var a=s(6540),n=s(115);function i(e,t){const s=Math.random()*(t-e+1)+e;return Number.isInteger(e)&&Number.isInteger(t)?Math.floor(s):s}function o(e,t,s){return(1-s)*e+s*t}function r(e){return e?{height:e.offsetHeight,width:e.offsetWidth}:{height:0,width:0}}const c=2*Math.PI,h={color:"#dee4fd",radius:[.5,3],speed:[1,3],wind:[-.5,2],changeFrequency:200,rotationSpeed:[-1,1],opacity:[1,1]};class f{static createSnowflakes(e,t,s){if(!e)return[];const a=[];for(let n=0;n<t;n++)a.push(new f(e,s));return a}constructor(e,t={}){this.updateConfig(t);const{radius:s,wind:a,speed:n,rotationSpeed:o,opacity:r}=this.config;this.params={x:i(0,e.offsetWidth),y:i(-e.offsetHeight,0),rotation:i(0,360),radius:i(...s),speed:i(...n),wind:i(...a),rotationSpeed:i(...o),nextSpeed:i(...n),nextWind:i(...a),nextRotationSpeed:i(...o),opacity:i(...r)},this.framesSinceLastUpdate=0}selectImage(){var e;this.config.images&&this.config.images.length>0?this.image=(e=this.config.images)[Math.floor(Math.random()*e.length)]:this.image=void 0}updateConfig(e){const t=this.config;this.config={...h,...e},this.config.changeFrequency=i(this.config.changeFrequency,1.5*this.config.changeFrequency),this.params&&!n(this.config.radius,null==t?void 0:t.radius)&&(this.params.radius=i(...this.config.radius)),n(this.config.images,null==t?void 0:t.images)||this.selectImage()}updateTargetParams(){this.params.nextSpeed=i(...this.config.speed),this.params.nextWind=i(...this.config.wind),this.image&&(this.params.nextRotationSpeed=i(...this.config.rotationSpeed))}update(e,t,s=1){const{x:a,y:n,rotation:i,rotationSpeed:r,nextRotationSpeed:c,wind:h,speed:f,nextWind:d,nextSpeed:u,radius:p}=this.params;this.params.x=(a+h*s)%(e+2*p),this.params.x>e+p&&(this.params.x=-p),this.params.y=(n+f*s)%(t+2*p),this.params.y>t+p&&(this.params.y=-p),this.image&&(this.params.rotation=(i+r)%360),this.params.speed=o(f,u,.01),this.params.wind=o(h,d,.01),this.params.rotationSpeed=o(r,c,.01),this.framesSinceLastUpdate++>this.config.changeFrequency&&(this.updateTargetParams(),this.framesSinceLastUpdate=0)}getImageOffscreenCanvas(e,t){var s,a;if(e instanceof HTMLImageElement&&e.loading)return e;let n=f.offscreenCanvases.get(e);if(n||(n={},f.offscreenCanvases.set(e,n)),!(t in n)){const a=document.createElement("canvas");a.width=t,a.height=t,null===(s=a.getContext("2d"))||void 0===s||s.drawImage(e,0,0,t,t),n[t]=a}return null!==(a=n[t])&&void 0!==a?a:e}drawCircle(e){e.moveTo(this.params.x,this.params.y),e.arc(this.params.x,this.params.y,this.params.radius,0,c)}drawImage(e){const{x:t,y:s,rotation:a,radius:n}=this.params,i=a*Math.PI/180,o=Math.cos(i),r=Math.sin(i);1!==this.params.opacity&&(e.save(),e.globalAlpha=this.params.opacity),e.setTransform(o,r,-r,o,t,s);const c=this.getImageOffscreenCanvas(this.image,n);e.drawImage(c,-n/2,-n/2,n,n),1!==this.params.opacity&&e.restore()}}f.offscreenCanvases=new WeakMap;const d=f,u={pointerEvents:"none",backgroundColor:"transparent",position:"absolute",top:0,left:0,width:"100%",height:"100%"},p=1e3/60;var l,g,m=function(e,t,s,a){if("a"===s&&!a)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===s?a:"a"===s?a.call(e):a?a.value:t.get(e)},w=function(e,t,s,a,n){if("m"===a)throw new TypeError("Private method is not writable");if("a"===a&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===a?n.call(e,s):n?n.value=s:t.set(e,s),s};class v{get ctx(){return m(this,l,"f")}get canvas(){return m(this,g,"f")}set canvas(e){w(this,g,e,"f"),w(this,l,e.getContext("2d"),"f")}constructor(e,t){this.lastUpdate=Date.now(),this.snowflakes=[],l.set(this,void 0),g.set(this,void 0),w(this,g,e,"f"),w(this,l,e.getContext("2d"),"f"),this.config={snowflakeCount:150,...h,...t},this.snowflakes=[],this.snowflakes=d.createSnowflakes(e,t.snowflakeCount||150,t),this.play()}updateConfig(e){this.config={...this.config,...e};const t=this.config.snowflakeCount-this.snowflakes.length;t>0&&(this.snowflakes=[...this.snowflakes,...d.createSnowflakes(this.canvas,t,e)]),t<0&&(this.snowflakes=this.snowflakes.slice(0,this.config.snowflakeCount));for(const e of this.snowflakes)e.updateConfig(this.config)}render(e=1){const{ctx:t,canvas:s,snowflakes:a}=this;if(!t||!s)return;const{offsetWidth:n,offsetHeight:i}=s;for(const t of a)t.update(n,i,e);if(t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,n,i),this.config.images&&this.config.images.length>0)for(const e of a)e.drawImage(t);else{t.beginPath();for(const e of a)e.drawCircle(t);t.fillStyle=this.config.color,t.fill()}}loop(){const e=Date.now(),t=Date.now()-this.lastUpdate;this.lastUpdate=e;const s=t/p;this.render(s),this.animationFrame=requestAnimationFrame((()=>this.loop()))}play(){this.loop()}pause(){this.animationFrame&&(cancelAnimationFrame(this.animationFrame),this.animationFrame=void 0)}}function y(e){const[t,s]=(0,a.useState)(e);return function(t,i){const o=(0,a.useRef)(i);n(i,o.current)||(o.current=i),(0,a.useEffect)((()=>s(e)),o.current)}(0,[e]),t}l=new WeakMap,g=new WeakMap;const k=({color:e=h.color,changeFrequency:t=h.changeFrequency,radius:s=h.radius,speed:n=h.speed,wind:i=h.wind,rotationSpeed:o=h.rotationSpeed,opacity:c=h.opacity,snowflakeCount:f=150,images:d,style:p}={})=>{const l=(g=p,(0,a.useMemo)((()=>({...u,...g||{}})),[g]));var g;const m=(0,a.useRef)(null),w=(e=>{const[t,s]=(0,a.useState)(r(e.current)),n=(0,a.useCallback)((()=>{e.current&&s(r(e.current))}),[e]);return(0,a.useEffect)((()=>{const{ResizeObserver:t}=window;if(e.current){if(n(),"function"==typeof t){const s=new t(n);return s.observe(e.current),()=>s.disconnect()}return window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)}}),[e,n]),t})(m),k=y({color:e,changeFrequency:t,radius:s,speed:n,wind:i,rotationSpeed:o,images:d,snowflakeCount:f,opacity:c}),C=(0,a.useRef)(k),S=(0,a.useRef)();return(0,a.useEffect)((()=>(!S.current&&m.current&&(S.current=new v(m.current,C.current)),()=>{var e;null===(e=S.current)||void 0===e||e.pause(),S.current=void 0})),[]),(0,a.useEffect)((()=>{S.current&&S.current.updateConfig(k)}),[k]),a.createElement("canvas",{ref:m,height:w.height,width:w.width,style:l,"data-testid":"SnowfallCanvas"})}}}]);